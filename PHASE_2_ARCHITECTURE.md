# Phase 2: Architecture Overview

Visual guide to the Enhanced Layout Manager system architecture.

---

## ğŸ“ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER INTERFACE LAYER                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Settings Page (Dashboard Tab)                 â”‚  â”‚
â”‚  â”‚  /app/settings/page.tsx                               â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚    Layout Template Selector                  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚    components/settings/                       â”‚    â”‚  â”‚
â”‚  â”‚  â”‚    layout-template-selector.tsx               â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Layout    â”‚  â”‚  Layout    â”‚  â”‚ Create â”‚ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Card 1   â”‚  â”‚   Card 2   â”‚  â”‚  New   â”‚ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚   [+]  â”‚ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [Active]  â”‚  â”‚  [Preview] â”‚  â”‚        â”‚ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚        â”‚ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”‚     â‹®      â”‚  â”‚     â‹®      â”‚  â”‚        â”‚ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ User Actions
                              â”‚
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPONENT LAYER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Layout Template Card                                 â”‚  â”‚
â”‚  â”‚  components/settings/layout-template-card.tsx         â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Card Content:                           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - Thumbnail visualization               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - Layout name & description             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - Card count                             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - Active/Preview badges                 â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Actions Menu (â‹®):                       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“‹ Duplicate                         â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ âœï¸ Rename                             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ ğŸ—‘ï¸ Delete                             â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Layout Preview Modal                                 â”‚  â”‚
â”‚  â”‚  components/settings/layout-preview-modal.tsx         â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Grid Visualization               â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”             â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ ğŸ’°â”‚ â”‚ ğŸ   â”‚ â”‚ ğŸš—â”‚             â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”˜             â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â¤ï¸    â”‚ â”‚   ğŸ’¼    â”‚         â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“Š Layout Info:                         â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - 10 visible cards                      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - 12 columns                             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  [Cancel] [Edit] [Apply Layout]          â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Component Events
                              â”‚
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUSINESS LOGIC LAYER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LayoutManager Class                                  â”‚  â”‚
â”‚  â”‚  lib/dashboard/layout-manager.ts                      â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  Core Methods:                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ generateDefaultLayout()                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ generatePresetLayouts()                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ loadActiveLayout(userId)                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ loadAllLayouts(userId)                            â”‚  â”‚
â”‚  â”‚  â”œâ”€ getLayoutById(layoutId, userId)                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ saveLayout(layout, userId)                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ setActiveLayout(layoutId, userId)                 â”‚  â”‚
â”‚  â”‚  â””â”€ deleteLayout(layoutId)                            â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  Enhanced Methods (Phase 2):                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ validateLayoutName(name, userId, excludeId?)      â”‚  â”‚
â”‚  â”‚  â”œâ”€ createCustomLayout(name, desc, userId, baseId?)   â”‚  â”‚
â”‚  â”‚  â”œâ”€ duplicateLayout(layoutId, newName, userId)        â”‚  â”‚
â”‚  â”‚  â”œâ”€ renameLayout(layoutId, newName, userId)           â”‚  â”‚
â”‚  â”‚  â”œâ”€ deleteCustomLayout(layoutId, userId)              â”‚  â”‚
â”‚  â”‚  â””â”€ generateLayoutThumbnail(layout)                   â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Database Operations
                              â”‚
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Supabase Database                                    â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  dashboard_layouts table:                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ id (UUID, PK)                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ user_id (UUID, FK â†’ auth.users)                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ layout_name (TEXT)                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ description (TEXT)                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ layout_config (JSONB)                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ cards: DashboardCard[]                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ columns: number                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ rowHeight: number                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ is_active (BOOLEAN)                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ is_default (BOOLEAN)                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ created_at (TIMESTAMP)                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ updated_at (TIMESTAMP)                           â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  Indexes:                                              â”‚  â”‚
â”‚  â”‚  - user_id (for fast user lookups)                    â”‚  â”‚
â”‚  â”‚  - is_active (for active layout queries)              â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  Triggers:                                             â”‚  â”‚
â”‚  â”‚  - deactivate_other_layouts (on is_active = true)     â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagrams

### Create Layout Flow

```
User                Component               LayoutManager          Database
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Click "Create" â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Show Dialog          â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Enter Name â”€â”€â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”œâ”€ Click Create â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ validateLayoutName()â”€â†’â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”œâ”€ Check Exists â”€â”€â†’ â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚â†â”€ Not Found â”€â”€â”€â”€â”€â”¤
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚â†â”€ { valid: true } â”€â”€â”€â”€â”¤                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ createCustomLayout()â”€â†’â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”œâ”€ INSERT â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚â†â”€ New Layout â”€â”€â”€â”€â”¤
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚â†â”€ { success, layout }â”€â”¤                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Close Dialog         â”‚                   â”‚
  â”‚                     â”œâ”€ Reload Layouts        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚â†â”€ Layout Created â”€â”€â”¤                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
```

### Preview & Apply Flow

```
User                Component               LayoutManager          Database
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Hover Card â”€â”€â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Show Preview Btn     â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Click Preview â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Open Modal           â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ generateThumbnail()â”€â”€â†’â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚â†â”€ Thumbnail Data â”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Render Preview       â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚â†â”€ See Preview â”€â”€â”€â”€â”€â”¤                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Click Apply â”€â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ setActiveLayout() â”€â”€â”€â†’â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”œâ”€ UPDATE (set) â”€â”€â†’ â”‚
  â”‚                     â”‚                        â”‚   is_active=true  â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”œâ”€ UPDATE (unset)â”€â†’ â”‚
  â”‚                     â”‚                        â”‚   others=false    â”‚
  â”‚                     â”‚                        â”‚   (via trigger)   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚â†â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚â†â”€ { success: true } â”€â”€â”¤                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Close Modal          â”‚                   â”‚
  â”‚                     â”œâ”€ Dispatch Event       â”‚                   â”‚
  â”‚                     â”‚   'layout-changed'     â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚â†â”€ Layout Applied â”€â”€â”¤                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
```

### Context Menu Actions Flow

```
User                Component               LayoutManager          Database
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Hover Card â”€â”€â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Show â‹® Button        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Click â‹® â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Show Dropdown        â”‚                   â”‚
  â”‚                     â”‚   â”œâ”€ Duplicate         â”‚                   â”‚
  â”‚                     â”‚   â”œâ”€ Rename            â”‚                   â”‚
  â”‚                     â”‚   â””â”€ Delete            â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Click "Duplicate"â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Show Dialog          â”‚                   â”‚
  â”‚                     â”‚   Pre-filled name      â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”œâ”€ Confirm â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ duplicateLayout() â”€â”€â”€â†’â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”œâ”€ SELECT source â”€â†’ â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚â†â”€ Layout data â”€â”€â”€â”€â”¤
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”œâ”€ INSERT clone â”€â”€â†’ â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚â†â”€ New layout â”€â”€â”€â”€â”€â”¤
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”‚â†â”€ { success, layout }â”€â”¤                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚                     â”œâ”€ Reload Grid          â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
  â”‚â†â”€ Duplicate Done â”€â”€â”¤                        â”‚                   â”‚
  â”‚                     â”‚                        â”‚                   â”‚
```

---

## ğŸ§© Component Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Settings Page (Dashboard Tab)            â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Layout Template Selector                   â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  State:                                      â”‚ â”‚
â”‚  â”‚  - layouts[]                                 â”‚ â”‚
â”‚  â”‚  - activeLayoutId                            â”‚ â”‚
â”‚  â”‚  - previewLayout                             â”‚ â”‚
â”‚  â”‚  - showCreateDialog                          â”‚ â”‚
â”‚  â”‚  - showRenameDialog                          â”‚ â”‚
â”‚  â”‚  - showDuplicateDialog                       â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Layout Template Card (Ã—N)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Props:                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - layout                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - isActive                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - isPreviewed                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Callbacks:                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - onClick()     â†’ Select layout         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - onPreview()   â†’ Show preview modal    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - onDuplicate() â†’ Show duplicate dialog â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - onRename()    â†’ Show rename dialog    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - onDelete()    â†’ Confirm & delete      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Create New Card                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  onClick() â†’ Show create dialog         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Layout Preview Modal                       â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  Props:                                      â”‚ â”‚
â”‚  â”‚  - open: boolean                             â”‚ â”‚
â”‚  â”‚  - layout: DashboardLayout                   â”‚ â”‚
â”‚  â”‚  - onClose()                                 â”‚ â”‚
â”‚  â”‚  - onApply(layoutId)                         â”‚ â”‚
â”‚  â”‚  - onEdit(layoutId)                          â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Dialogs                                     â”‚ â”‚
â”‚  â”‚  - Create Layout Dialog                      â”‚ â”‚
â”‚  â”‚  - Duplicate Layout Dialog                   â”‚ â”‚
â”‚  â”‚  - Rename Layout Dialog                      â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ƒï¸ Type Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        DashboardLayout                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id?: string                              â”‚
â”‚ user_id?: string                         â”‚
â”‚ layout_name: string                      â”‚
â”‚ description?: string                     â”‚
â”‚ layout_config: LayoutConfig              â”‚â”€â”€â”€â”
â”‚ is_active: boolean                       â”‚   â”‚
â”‚ is_default: boolean                      â”‚   â”‚
â”‚ created_at?: string                      â”‚   â”‚
â”‚ updated_at?: string                      â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                               â”‚
                                               â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚      LayoutConfig                â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚ cards: DashboardCard[]           â”‚â”€â”€â”€â”
                        â”‚ columns: number                  â”‚   â”‚
                        â”‚ rowHeight: number                â”‚   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                                               â”‚
                                                               â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚        DashboardCard                 â”‚
                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                              â”‚ id: string                           â”‚
                              â”‚ title: string                        â”‚
                              â”‚ icon: string                         â”‚
                              â”‚ domain: string                       â”‚
                              â”‚ size: CardSize                       â”‚â”€â”€â”€â”
                              â”‚ color: string                        â”‚   â”‚
                              â”‚ visible: boolean                     â”‚   â”‚
                              â”‚ position: CardPosition               â”‚â”€â”€â”€â”¼â”€â”€â”
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
                                                                         â”‚  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
                      â”‚             CardSize                          â”‚  â”‚  â”‚
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
                      â”‚ 'small' | 'medium' | 'large'                 â”‚  â”‚  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                                         â†‘                               â”‚  â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                                                            â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
                      â”‚           CardPosition                        â”‚     â”‚
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
                      â”‚ x: number  (column start)                    â”‚     â”‚
                      â”‚ y: number  (row start)                       â”‚     â”‚
                      â”‚ w: number  (width in columns)                â”‚     â”‚
                      â”‚ h: number  (height in rows)                  â”‚     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                                         â†‘                                  â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SECURITY LAYERS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Authentication
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Auth                                      â”‚
â”‚  - User must be logged in                           â”‚
â”‚  - User ID from auth.getUser()                      â”‚
â”‚  - Session validation                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Layer 2: Authorization (Row Level Security)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database RLS Policies                              â”‚
â”‚  - Users can only access their own layouts          â”‚
â”‚  - WHERE user_id = auth.uid()                       â”‚
â”‚  - Enforced at database level                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Layer 3: Application Validation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LayoutManager Validation                           â”‚
â”‚  - User ownership verification                      â”‚
â”‚  - .eq('user_id', userId)                          â”‚
â”‚  - Name uniqueness per user                         â”‚
â”‚  - Operation permission checks                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Layer 4: Business Rules
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Operation-Specific Rules                           â”‚
â”‚  - Cannot rename default layouts                    â”‚
â”‚  - Cannot delete default layouts                    â”‚
â”‚  - Cannot delete active layout                      â”‚
â”‚  - Confirmation required for deletion               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Layer 5: UI Protection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component-Level Guards                             â”‚
â”‚  - Hide actions based on permissions                â”‚
â”‚  - Disable buttons when invalid                     â”‚
â”‚  - Show warnings/errors                             â”‚
â”‚  - Confirmation dialogs                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Component State Tree                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LayoutTemplateSelector
â”œâ”€ layouts: DashboardLayout[]
â”‚  â””â”€ Loaded from database (user-specific)
â”‚
â”œâ”€ activeLayoutId: string | null
â”‚  â””â”€ ID of currently active layout
â”‚
â”œâ”€ previewLayout: DashboardLayout | null
â”‚  â””â”€ Layout being previewed in modal
â”‚
â”œâ”€ selectedLayoutId: string | null
â”‚  â””â”€ Layout selected for rename/duplicate/delete
â”‚
â”œâ”€ Dialog States (boolean)
â”‚  â”œâ”€ showCreateDialog
â”‚  â”œâ”€ showRenameDialog
â”‚  â””â”€ showDuplicateDialog
â”‚
â””â”€ Form States
   â”œâ”€ newLayoutName: string
   â”œâ”€ newLayoutDescription: string
   â””â”€ error: string

State Updates:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Action    â†’ State Update â†’ UI Refresh   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Create Layout  â†’ layouts.push() â†’ Re-render  â”‚
â”‚ Delete Layout  â†’ layouts.filter() â†’ Re-renderâ”‚
â”‚ Rename Layout  â†’ layouts.map() â†’ Re-render   â”‚
â”‚ Set Active     â†’ activeLayoutId = id â†’ Badge â”‚
â”‚ Preview        â†’ previewLayout = layout â†’ Modalâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Event System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Custom Events                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Event 1: dashboard-layout-changed
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dispatched: When active layout changes     â”‚
â”‚  Payload: { layoutId: string }              â”‚
â”‚                                              â”‚
â”‚  Listeners:                                  â”‚
â”‚  - DashboardSwitcher (reload dashboard)     â”‚
â”‚  - Other components needing refresh         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Event 2: dashboard-view-mode-changed
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dispatched: When view mode toggles         â”‚
â”‚  Payload: { mode: 'standard'|'customizable'}â”‚
â”‚                                              â”‚
â”‚  Listeners:                                  â”‚
â”‚  - DashboardSwitcher (switch view)          â”‚
â”‚  - Settings components (UI sync)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Event Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component  â”‚  â”€â”€â†’   â”‚   Event     â”‚  â”€â”€â†’   â”‚  Listener   â”‚
â”‚  (Dispatch) â”‚        â”‚   Bus       â”‚        â”‚ (Component) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                              â”‚
      â”‚  dispatchEvent()                             â”‚  addEventListener()
      â†“                                              â†“
window.dispatchEvent(                      window.addEventListener(
  new CustomEvent(                           'dashboard-layout-changed',
    'dashboard-layout-changed',              (e) => handleChange(e.detail)
    { detail: { layoutId } }               )
  )
)
```

---

## ğŸ”„ Database Schema & Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              dashboard_layouts table                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id             UUID        PRIMARY KEY             â”‚
â”‚  user_id        UUID        FOREIGN KEY â†’ users.id â”‚  â† Relationship
â”‚  layout_name    TEXT        NOT NULL                â”‚
â”‚  description    TEXT                                â”‚
â”‚  layout_config  JSONB       NOT NULL                â”‚  â† Complex data
â”‚  is_active      BOOLEAN     DEFAULT false           â”‚  â† Only one true
â”‚  is_default     BOOLEAN     DEFAULT false           â”‚  â† System presets
â”‚  created_at     TIMESTAMP   DEFAULT now()           â”‚
â”‚  updated_at     TIMESTAMP   DEFAULT now()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ user_id FK
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  auth.users table                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id             UUID        PRIMARY KEY             â”‚
â”‚  email          TEXT                                â”‚
â”‚  ...other fields                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Indexes:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  idx_dashboard_layouts_user_id   ON user_id        â”‚  â† Fast user lookups
â”‚  idx_dashboard_layouts_active    ON is_active      â”‚  â† Fast active lookup
â”‚  idx_dashboard_layouts_created   ON created_at     â”‚  â† Sorting
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Triggers:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  deactivate_other_layouts()                         â”‚
â”‚  BEFORE UPDATE ON dashboard_layouts                 â”‚
â”‚  WHEN is_active = true                              â”‚
â”‚  â†’ Set all other user layouts to is_active = false  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Constraints:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNIQUE(user_id, layout_name) â† Case-sensitive     â”‚
â”‚  CHECK(layout_name != '')      â† No empty names     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Performance Optimizations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Performance Strategy                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Data Loading
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - Load all layouts once               â”‚
â”‚  - Cache in component state            â”‚
â”‚  - Reload only after mutations         â”‚
â”‚  - Use database indexes                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Preview Generation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - generateThumbnail() is client-side â”‚
â”‚  - No server round-trip                â”‚
â”‚  - Minimal rendering (grid + boxes)    â”‚
â”‚  - Lazy-load preview modal             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. State Updates
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - Batch state updates                 â”‚
â”‚  - Avoid unnecessary re-renders        â”‚
â”‚  - Use React.memo for cards            â”‚
â”‚  - Debounce form inputs                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Database Queries
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - SELECT only needed fields           â”‚
â”‚  - Use WHERE user_id early             â”‚
â”‚  - Leverage indexes                    â”‚
â”‚  - Single query for all layouts        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Metrics:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Initial Load:    < 200ms              â”‚
â”‚  Layout Switch:   < 100ms              â”‚
â”‚  Create/Delete:   < 150ms              â”‚
â”‚  Preview Open:    < 50ms (instant)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Responsive Design Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Responsive Breakpoints                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile (< 640px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Layout Card 1      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Layout Card 2      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Create New         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Grid: 1 column

Tablet (640px - 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Card 1  â”‚  â”‚  Card 2  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Card 3  â”‚  â”‚  Create  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Grid: 2 columns

Desktop (1024px - 1280px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Card 1â”‚  â”‚Card 2â”‚  â”‚Card 3â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Card 4â”‚  â”‚Card 5â”‚  â”‚Createâ”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Grid: 3 columns

Large Desktop (> 1280px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚Crd 1â”‚  â”‚Crd 2â”‚  â”‚Crd 3â”‚  â”‚Crd 4â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚Crd 5â”‚  â”‚Crd 6â”‚  â”‚Crd 7â”‚  â”‚Createâ”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Grid: 4 columns

CSS:
grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4
```

---

## ğŸ¨ Design System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Color Palette                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Primary Actions
â”œâ”€ Create/Apply:  Blue (#3B82F6)
â”œâ”€ Preview:       Purple (#8B5CF6)
â””â”€ Edit:          Gray (#6B7280)

Status Indicators
â”œâ”€ Active:        Blue (#3B82F6)
â”œâ”€ Default:       Gray (#6B7280)
â””â”€ Error:         Red (#EF4444)

Destructive Actions
â””â”€ Delete:        Red (#EF4444)

Backgrounds
â”œâ”€ Card:          White / Gray-800 (dark)
â”œâ”€ Hover:         Gray-50 / Gray-700 (dark)
â””â”€ Accent:        Blue-50 / Blue-950 (dark)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Typography                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Headings
â”œâ”€ H1 (Page Title):    text-3xl font-bold
â”œâ”€ H2 (Card Title):    text-xl font-semibold
â””â”€ H3 (Section):       text-lg font-semibold

Body
â”œâ”€ Normal:             text-base
â”œâ”€ Small:              text-sm
â””â”€ Extra Small:        text-xs

Weights
â”œâ”€ Normal:             font-normal
â”œâ”€ Medium:             font-medium
â”œâ”€ Semibold:           font-semibold
â””â”€ Bold:               font-bold

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Spacing                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Component Padding
â”œâ”€ Card:               p-4 (16px)
â”œâ”€ Modal:              p-6 (24px)
â””â”€ Dialog:             p-4 (16px)

Component Gaps
â”œâ”€ Grid:               gap-4 (16px)
â”œâ”€ Stack:              space-y-4 (16px)
â””â”€ Inline:             gap-2 (8px)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Border Radius                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Elements
â”œâ”€ Card:               rounded-xl (12px)
â”œâ”€ Button:             rounded-lg (8px)
â”œâ”€ Input:              rounded-lg (8px)
â””â”€ Badge:              rounded-full (999px)
```

---

This architecture document provides a complete visual reference for understanding how Phase 2 components interact and how data flows through the system. All layers work together to provide a secure, performant, and user-friendly layout management experience.



























